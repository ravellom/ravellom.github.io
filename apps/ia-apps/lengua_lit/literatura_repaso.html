<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrenador L√≠rica Renacentista</title>
    <style>
        :root {
            --primary: #58cc02; /* Verde Duolingo */
            --primary-dark: #46a302;
            --secondary: #1cb0f6; /* Azul */
            --secondary-dark: #1899d6;
            --error: #ff4b4b; /* Rojo */
            --background: #f0f2f5;
            --card-bg: #ffffff;
            --text: #3c3c3c;
            --gray: #e5e5e5;
        }

        body {
            font-family: 'Nunito', 'Segoe UI', Helvetica, Arial, sans-serif;
            background-color: var(--background);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* Header */
        header {
            width: 100%;
            background: var(--card-bg);
            padding: 15px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }

        h1 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--secondary);
        }

        /* Selector de Modo */
        .mode-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
            padding: 0 10px;
        }

        .mode-btn {
            background: var(--card-bg);
            border: 2px solid var(--gray);
            border-bottom: 4px solid var(--gray);
            padding: 12px 24px;
            border-radius: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text);
            font-size: 1rem;
        }

        .mode-btn.active {
            border-color: var(--secondary);
            border-bottom-color: var(--secondary-dark);
            background-color: #ddf4ff;
            color: var(--secondary-dark);
        }

        .mode-btn:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }

        /* Tarjeta de Pregunta */
        .game-container {
            width: 90%;
            max-width: 600px;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            border: 2px solid var(--gray);
            box-shadow: 0 4px 0 var(--gray);
            text-align: center;
            position: relative;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 30px;
            font-weight: 600;
            line-height: 1.5;
        }

        .verse-box {
            font-style: italic;
            color: #555;
            background: #f8f9fa;
            padding: 15px;
            border-left: 4px solid var(--secondary);
            margin-bottom: 20px;
            text-align: left;
            border-radius: 8px;
            font-family: 'Georgia', serif;
        }

        /* Opciones */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .option-btn {
            background: var(--card-bg);
            border: 2px solid var(--gray);
            border-bottom: 4px solid var(--gray);
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }

        .option-btn:hover {
            background-color: #f7f7f7;
        }

        .option-btn:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }

        /* Estados de respuesta */
        .option-btn.correct {
            background-color: #d7ffb8;
            border-color: var(--primary);
            border-bottom-color: var(--primary-dark);
            color: var(--primary-dark);
        }

        .option-btn.incorrect {
            background-color: #ffdfe0;
            border-color: var(--error);
            border-bottom-color: #d32f2f;
            color: #d32f2f;
        }

        /* Feedback Footer */
        .feedback-area {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--gray);
            display: none; /* Oculto por defecto */
        }

        .feedback-msg {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .feedback-explanation {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 15px;
        }

        .next-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-bottom: 4px solid var(--primary-dark);
            padding: 12px 30px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1rem;
            cursor: pointer;
            text-transform: uppercase;
            width: 100%;
        }

        .next-btn:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }

        /* Racha */
        .streak-counter {
            position: absolute;
            top: -15px;
            right: 20px;
            background: #ffc107;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 800;
            border: 2px solid #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        @media (min-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5NTJRD37');</script>
<!-- End Google Tag Manager -->
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5NTJRD37"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <header>
        <h1>üìö L√≠rica Renacentista (1¬∫ Bach)</h1>
    </header>

    <div class="mode-selector">
        <button class="mode-btn active" onclick="setMode('teoria')">üß† Teor√≠a (Libro)</button>
        <button class="mode-btn" onclick="setMode('practica')">‚úçÔ∏è Pr√°ctica (Poemas)</button>
    </div>

    <div class="game-container">
        <div class="streak-counter">üî• Racha: <span id="streak">0</span></div>
        
        <div id="quiz-content">
            </div>

        <div class="feedback-area" id="feedback">
            <div class="feedback-msg" id="msg-title"></div>
            <div class="feedback-explanation" id="msg-text"></div>
            <button class="next-btn" onclick="nextQuestion()">Siguiente</button>
        </div>
    </div>

    <script>
        // --- BASE DE DATOS DE PREGUNTAS ---
        
        // 1. Preguntas de Teor√≠a Literal (Basadas en las im√°genes + Garcilaso)
        const theoryQuestions = [
            {
                q: "¬øQu√© autor representa la 'poes√≠a m√≠stica' en su m√°xima expresi√≥n?",
                options: ["Fray Luis de Le√≥n", "San Juan de la Cruz", "Garcilaso de la Vega", "Fernando de Herrera"],
                correct: 1,
                explanation: "San Juan de la Cruz es la cima de la m√≠stica espa√±ola, tratando la uni√≥n del alma con Dios."
            },
            {
                q: "¬øQu√© estrofa introdujo Garcilaso y populariz√≥ Fray Luis de Le√≥n en sus odas?",
                options: ["El Soneto", "La Lira", "El Romance", "La Octava Real"],
                correct: 1,
                explanation: "La Lira (7a, 11B, 7a, 7b, 11B) es clave en la l√≠rica renacentista, usada magistralmente en 'Oda a la vida retirada'."
            },
            {
                q: "En la simbolog√≠a de San Juan, ¬øqu√© representan 'las fieras'?",
                options: ["Los pecados capitales", "Las amenazas del mundo", "El deseo carnal", "La Inquisici√≥n"],
                correct: 1,
                explanation: "Seg√∫n la teor√≠a del libro, las fieras simbolizan las amenazas y obst√°culos del mundo."
            },
            {
                q: "¬øCu√°l de estas obras pertenece a Alonso de Ercilla?",
                options: ["La Araucana", "Noche oscura del alma", "Anotaciones a Garcilaso", "C√°ntico espiritual"],
                correct: 0,
                explanation: "La Araucana es el gran poema √©pico culto sobre la conquista de Am√©rica (guerra de Arauco)."
            },
            {
                q: "¬øQu√© t√≥pico latino utiliza Fray Luis para elogiar la vida sencilla lejos de la ciudad?",
                options: ["Carpe Diem", "Beatus Ille", "Descriptio Puellae", "Locus Amoenus"],
                correct: 1,
                explanation: "'Beatus Ille' significa 'Dichoso aquel' y alaba la vida retirada frente al ajetreo cortesano."
            },
            {
                q: "¬øCu√°l es el tema central de la poes√≠a de Garcilaso de la Vega?",
                options: ["La religi√≥n", "El amor petrarquista y la naturaleza", "La guerra de Flandes", "La cr√≠tica social"],
                correct: 1,
                explanation: "Garcilaso introdujo el petrarquismo: el amor idealizado, la mujer inalcanzable y la naturaleza arm√≥nica."
            },
            {
                q: "¬øQu√© obra de San Juan describe la huida del alma (la Esposa) para buscar al Amado?",
                options: ["Llama de amor viva", "C√°ntico espiritual", "Noche oscura del alma", "Subida al Monte Carmelo"],
                correct: 2,
                explanation: "En 'Noche oscura', el yo femenino escapa de casa para reunirse con su amado (Dios)."
            },
            {
                q: "¬øQu√© autor realiz√≥ las 'Anotaciones' a la obra de Garcilaso, convirti√©ndolo en un cl√°sico?",
                options: ["Fray Luis de Le√≥n", "Fernando de Herrera", "San Juan de la Cruz", "Cervantes"],
                correct: 1,
                explanation: "Fernando de Herrera, de la escuela sevillana, estudi√≥ y anot√≥ minuciosamente la obra de Garcilaso."
            },
            {
                q: "¬øQu√© significa el t√≥pico 'Aurea Mediocritas' presente en Fray Luis?",
                options: ["La edad de oro", "La dorada median√≠a (equilibrio)", "El oro lo compra todo", "La mediocridad humana"],
                correct: 1,
                explanation: "Defiende la moderaci√≥n, conformarse con lo necesario y evitar los extremos de la riqueza o la miseria."
            }
        ];

        // 2. Preguntas de Pr√°ctica (Fragmentos de Poemas)
        const practiceQuestions = [
            {
                type: "text",
                text: "¬°Qu√© descansada vida<br>la del que huye del mundanal r√ºido,<br>y sigue la escondida<br>senda, por donde han ido<br>los pocos sabios que en el mundo han sido!",
                q: "¬øA qu√© autor y obra pertenecen estos versos?",
                options: ["San Juan (C√°ntico)", "Garcilaso (√âgloga I)", "Fray Luis (Oda a la vida retirada)", "Ercilla (La Araucana)"],
                correct: 2,
                explanation: "Es el inicio m√°s famoso de Fray Luis de Le√≥n. Refleja el t√≥pico Beatus Ille."
            },
            {
                type: "text",
                text: "En tanto que de rosa y azucena<br>se muestra la color en vuestro gesto,<br>y que vuestro mirar ardiente, honesto,<br>enciende al coraz√≥n y lo refrena...",
                q: "¬øQu√© t√≥pico renacentista predomina en este soneto de Garcilaso?",
                options: ["Beatus Ille", "Carpe Diem", "Ubi Sunt", "Memento Mori"],
                correct: 1,
                explanation: "Es el Soneto XXIII. Invita a aprovechar la juventud (Carpe Diem) antes de que llegue la vejez ('el tiempo airado')."
            },
            {
                type: "text",
                text: "¬°Oh bosques y espesuras<br>plantadas por la mano del Amado!<br>¬°Oh prado de verduras<br>de flores esmaltado!<br>Decid si por vosotros ha pasado.",
                q: "¬øQui√©n es el autor de esta estrofa?",
                options: ["Garcilaso de la Vega", "Fray Luis de Le√≥n", "San Juan de la Cruz", "Fernando de Herrera"],
                correct: 2,
                explanation: "Es el 'C√°ntico Espiritual' de San Juan. La Esposa pregunta a la naturaleza (criaturas) por su Amado (Dios)."
            },
            {
                type: "text",
                text: "El aire el huerto orea<br>y ofrece mil olores al sentido;<br>los √°rboles menea<br>con un manso r√ºido<br>que del oro y del cetro pone olvido.",
                q: "¬øQu√© simboliza el 'huerto' en este poema de Fray Luis?",
                options: ["Un lugar agr√≠cola", "El Locus Amoenus (lugar ideal)", "El Para√≠so perdido", "La Corte real"],
                correct: 1,
                explanation: "El huerto es el 'Locus Amoenus', un entorno natural perfecto que invita a la paz y la contemplaci√≥n."
            },
            {
                type: "text",
                text: "Salid sin duelo,<br>l√°grimas, corriendo.",
                q: "Este estribillo aparece en las √âglogas de Garcilaso. ¬øQu√© g√©nero es una √âgloga?",
                options: ["Poes√≠a pastoril", "Poes√≠a √©pica de guerra", "Poes√≠a religiosa", "S√°tira burlesca"],
                correct: 0,
                explanation: "Las √âglogas son di√°logos po√©ticos protagonizados por pastores idealizados (como Salicio y Nemoroso)."
            },
            {
                type: "text",
                text: "Qued√©me y olvid√©me,<br>el rostro reclin√© sobre el Amado,<br>ces√≥ todo y dej√©me,<br>dejando mi cuidado<br>entre las azucenas olvidado.",
                q: "¬øA qu√© fase de la m√≠stica corresponde este momento?",
                options: ["V√≠a Purgativa", "V√≠a Iluminativa", "V√≠a Unitiva", "V√≠a Asc√©tica"],
                correct: 2,
                explanation: "Es la 'V√≠a Unitiva' (uni√≥n total con Dios). El alma se abandona y olvida todo lo terrenal al unirse al Creador."
            }
        ];

        // --- L√ìGICA DEL JUEGO ---
        
        let currentMode = 'teoria';
        let streak = 0;
        let currentQuestion = null;
        let isAnswering = true;

        const quizContent = document.getElementById('quiz-content');
        const feedbackArea = document.getElementById('feedback');
        const msgTitle = document.getElementById('msg-title');
        const msgText = document.getElementById('msg-text');
        const streakSpan = document.getElementById('streak');
        const modeBtns = document.querySelectorAll('.mode-btn');

        function setMode(mode) {
            currentMode = mode;
            // Actualizar botones visualmente
            modeBtns.forEach(btn => btn.classList.remove('active'));
            if(mode === 'teoria') modeBtns[0].classList.add('active');
            else modeBtns[1].classList.add('active');
            
            // Reiniciar flujo
            nextQuestion();
        }

        function getRandomQuestion() {
            const source = currentMode === 'teoria' ? theoryQuestions : practiceQuestions;
            const randomIndex = Math.floor(Math.random() * source.length);
            return source[randomIndex];
        }

        function renderQuestion() {
            currentQuestion = getRandomQuestion();
            isAnswering = true;
            feedbackArea.style.display = 'none';

            let html = '';

            // Si es pr√°ctica y tiene texto po√©tico
            if (currentQuestion.text) {
                html += `<div class="verse-box">${currentQuestion.text}</div>`;
            }

            html += `<div class="question-text">${currentQuestion.q}</div>`;
            html += `<div class="options-grid">`;
            
            // Mezclar opciones para que no siempre est√©n en el mismo orden (Visualmente, aunque l√≥gica se mantiene)
            // Nota: Para simplificar, aqu√≠ mantendremos el √≠ndice l√≥gico pero renderizaremos botones
            
            currentQuestion.options.forEach((opt, index) => {
                html += `<button class="option-btn" onclick="checkAnswer(${index}, this)">${opt}</button>`;
            });
            
            html += `</div>`;

            quizContent.innerHTML = html;
        }

        function checkAnswer(selectedIndex, btnElement) {
            if (!isAnswering) return; // Evitar doble click
            isAnswering = false;

            const buttons = document.querySelectorAll('.option-btn');
            const correctIndex = currentQuestion.correct;

            if (selectedIndex === correctIndex) {
                // Acierto
                btnElement.classList.add('correct');
                msgTitle.textContent = "¬°Correcto! üéâ";
                msgTitle.style.color = "var(--primary-dark)";
                streak++;
            } else {
                // Fallo
                btnElement.classList.add('incorrect');
                buttons[correctIndex].classList.add('correct'); // Mostrar la correcta
                msgTitle.textContent = "Incorrecto üòî";
                msgTitle.style.color = "#d32f2f";
                streak = 0;
            }

            streakSpan.textContent = streak;
            msgText.textContent = currentQuestion.explanation;
            feedbackArea.style.display = 'block';
        }

        function nextQuestion() {
            renderQuestion();
        }

        // Iniciar al cargar
        renderQuestion();

    </script>
</body>
</html>
