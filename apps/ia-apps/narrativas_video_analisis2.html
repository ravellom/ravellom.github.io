<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cine-Analista: 7 Componentes de la Narrativa</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-color: #141414;
            --card-bg: #1f1f1f;
            --accent: #e50914; /* Rojo */
            --primary: #46d369; /* Verde */
            --highlight: #f1c40f; /* Amarillo narrativo */
            --text-main: #ffffff;
            --text-dim: #b3b3b3;
            --border-radius: 8px;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 40px 20px;
            min-height: 100vh;
        }

        /* --- CABECERA --- */
        .header-container {
            max-width: 1000px;
            margin: 0 auto 30px auto;
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            flex-wrap: wrap;
            gap: 20px;
        }

        h1 { margin: 0; font-size: 2.2rem; letter-spacing: -1px; }
        h1 span { color: var(--accent); }
        .subtitle { color: var(--text-dim); margin: 5px 0 0 0; font-size: 1rem; }

        /* Inputs de datos */
        .meta-inputs { display: flex; gap: 15px; flex-wrap: wrap; }
        .meta-group { display: flex; flex-direction: column; }
        .meta-group label { font-size: 0.7rem; color: var(--text-dim); margin-bottom: 5px; text-transform: uppercase; }
        .meta-input {
            background: #333; border: 1px solid #444; color: white;
            padding: 8px 12px; border-radius: 4px; width: 220px;
        }

        /* --- √ÅREA DE CAPTURA (Lo que saldr√° en la imagen) --- */
        #capture-area {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--bg-color); /* Asegura fondo al exportar */
        }

        /* --- SECCI√ìN 1: LOS 7 COMPONENTES (Grid) --- */
        .section-title {
            color: var(--highlight);
            text-transform: uppercase;
            font-size: 1.1rem;
            font-weight: bold;
            letter-spacing: 1px;
            margin-bottom: 20px;
            margin-top: 10px;
            border-left: 4px solid var(--highlight);
            padding-left: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .grid-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Adaptable */
            gap: 20px;
            margin-bottom: 40px;
        }

        /* Tarjetas numeradas (Estilo Sketchnote) */
        .card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            border: 1px solid #333;
            position: relative;
            transition: transform 0.2s;
        }
        .card:hover { border-color: #555; }

        .card-number {
            position: absolute; top: -10px; left: -10px;
            background: var(--text-main); color: black;
            font-weight: 900; font-size: 1.2rem;
            width: 35px; height: 35px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 5px;
            transform: rotate(-5deg);
            box-shadow: 3px 3px 0px rgba(0,0,0,0.5);
            z-index: 10;
        }

        .card-header {
            display: flex; justify-content: flex-end; align-items: center; margin-bottom: 10px;
            padding-left: 30px; /* Espacio para el n√∫mero */
        }
        .label-text { font-weight: bold; font-size: 1rem; color: #ddd; width: 100%; }
        
        .hint-btn {
            background: rgba(255,255,255,0.1); border: none; color: var(--text-dim);
            width: 24px; height: 24px; border-radius: 50%; cursor: pointer;
            font-weight: bold; font-size: 0.8rem;
        }
        .hint-btn:hover { background: var(--highlight); color: black; }

        textarea, select {
            width: 100%; background: #141414; border: 1px solid #333;
            color: #eee; padding: 12px; border-radius: 6px;
            font-family: inherit; font-size: 0.9rem; resize: vertical; min-height: 80px;
        }
        select { min-height: 45px; cursor: pointer; }
        
        /* --- SECCI√ìN 2: ESTRUCTURA NARRATIVA (Timeline Horizontal) --- */
        .timeline-wrapper {
            background: var(--card-bg); padding: 25px; border-radius: var(--border-radius);
            border: 1px solid #333;
        }
        .timeline-flex {
            display: flex; gap: 20px; flex-wrap: wrap;
        }
        .timeline-column { flex: 1; min-width: 250px; }
        
        .phase-header {
            display: flex; align-items: center; gap: 10px; margin-bottom: 10px;
            text-transform: uppercase; font-size: 0.85rem; letter-spacing: 1px; font-weight: bold;
        }
        .dot { width: 12px; height: 12px; border-radius: 50%; display: inline-block; }
        .dot-1 { background: #3498db; }
        .dot-2 { background: #e74c3c; }
        .dot-3 { background: #46d369; }

        /* --- BOTONES DE ACCI√ìN (Fuera del √°rea de captura) --- */
        .actions { margin-top: 40px; text-align: center; display: flex; justify-content: center; gap: 20px; }
        
        .btn-action {
            padding: 15px 30px; font-size: 1rem; font-weight: bold;
            border-radius: 30px; cursor: pointer; transition: transform 0.2s; border: none;
            display: flex; align-items: center; gap: 10px;
        }
        .btn-download { background: var(--highlight); color: black; }
        .btn-download:hover { transform: scale(1.05); background: #f39c12; }
        
        .btn-reset { background: #333; color: white; }
        .btn-reset:hover { background: #555; }

        /* --- MODALES --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 2000;
            display: none; justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal-box {
            background: #222; border: 1px solid #555; border-radius: 10px;
            padding: 30px; max-width: 500px; width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .modal-box h3 { color: var(--highlight); margin-top: 0; }
        .modal-content { line-height: 1.5; font-size: 0.95rem; color: #ccc; }
        .modal-content strong { color: white; }
        .btn-close {
            margin-top: 20px; background: #444; color: white; border: none;
            padding: 8px 20px; border-radius: 4px; cursor: pointer; float: right;
        }

    </style>
</head>
<body>

    <header class="header-container">
        <div>
            <h1>CINE <span>ANALISTA</span></h1>
            <p class="subtitle">Herramienta de Narrativa Digital & Storytelling</p>
        </div>
        <div class="actions" style="margin:0">
            <button class="btn-action btn-download" onclick="downloadImage()">üì∏ Descargar como Imagen</button>
        </div>
    </header>

    <div id="capture-area">
        
        <div class="meta-inputs" style="margin-bottom: 30px; border-bottom: 1px solid #333; padding-bottom: 20px;">
            <div class="meta-group">
                <label>Estudiante</label>
                <input type="text" class="meta-input" placeholder="Tu Nombre">
            </div>
            <div class="meta-group">
                <label>Video Analizado</label>
                <input type="text" class="meta-input" placeholder="T√≠tulo del video">
            </div>
            <div class="meta-group">
                <label>Fecha</label>
                <input type="date" class="meta-input">
            </div>
        </div>

        <div class="section-title">
            <span>I. Los 7 Componentes de la Narraci√≥n</span>
            <small style="font-size: 0.7em; opacity: 0.6; text-transform: none;">Basado en #EduNarraMooc</small>
        </div>

        <div class="grid-analysis">
            
            <div class="card">
                <div class="card-number">1</div>
                <div class="card-header">
                    <span class="label-text">Punto de Vista</span>
                    <button class="hint-btn" onclick="openModal('pov')">?</button>
                </div>
                <select>
                    <option value="">-- ¬øQui√©n cuenta la historia? --</option>
                    <option value="interno_prota">Interno: Protagonista (1¬™ Persona)</option>
                    <option value="interno_testigo">Interno: Testigo (1¬™ Persona)</option>
                    <option value="externo_omni">Externo: Omnisciente (Sabe todo)</option>
                    <option value="externo_obs">Externo: Observador (Solo lo que se ve)</option>
                </select>
                <textarea style="margin-top:10px" placeholder="Justifica por qu√©..."></textarea>
            </div>

            <div class="card">
                <div class="card-number">2</div>
                <div class="card-header">
                    <span class="label-text">Pregunta Dram√°tica</span>
                    <button class="hint-btn" onclick="openModal('pregunta')">?</button>
                </div>
                <textarea placeholder="¬øCu√°l es la duda o misterio que te mantiene viendo el video hasta el final?"></textarea>
            </div>

            <div class="card">
                <div class="card-number">3</div>
                <div class="card-header">
                    <span class="label-text">Emoci√≥n</span>
                    <button class="hint-btn" onclick="openModal('emocion')">?</button>
                </div>
                <textarea placeholder="¬øCon qu√© emoci√≥n conecta? (Alegr√≠a, miedo, nostalgia...). Describe el momento clave."></textarea>
            </div>

            <div class="card">
                <div class="card-number">4</div>
                <div class="card-header">
                    <span class="label-text">La Voz</span>
                    <button class="hint-btn" onclick="openModal('voz')">?</button>
                </div>
                <input type="text" class="meta-input" style="width:100%; margin-bottom:10px;" placeholder="Ej: Ir√≥nica, seria, entusiasta...">
                <textarea style="min-height: 50px;" placeholder="¬øCoincide lo que dice con lo que se ve?"></textarea>
            </div>

            <div class="card">
                <div class="card-number">5</div>
                <div class="card-header">
                    <span class="label-text">Banda Sonora</span>
                    <button class="hint-btn" onclick="openModal('musica')">?</button>
                </div>
                <textarea placeholder="Analiza la m√∫sica y efectos. ¬øAcompa√±a o a√±ade significado?"></textarea>
            </div>

            <div class="card">
                <div class="card-number">6</div>
                <div class="card-header">
                    <span class="label-text">Econom√≠a Narrativa</span>
                    <button class="hint-btn" onclick="openModal('economia')">?</button>
                </div>
                <textarea placeholder="Menos es m√°s. ¬øHay elementos que sobran? ¬øSe cuenta mucho en poco tiempo?"></textarea>
            </div>

            <div class="card" style="grid-column: 1 / -1;">
                <div class="card-number">7</div>
                <div class="card-header">
                    <span class="label-text">Ritmo de la Historia</span>
                    <button class="hint-btn" onclick="openModal('ritmo')">?</button>
                </div>
                <select style="margin-bottom: 10px;">
                    <option>R√°pido / Din√°mico</option>
                    <option>Lento / Contemplativo</option>
                    <option>Variable (Cambia durante el video)</option>
                </select>
                <textarea style="min-height: 50px;" placeholder="¬øC√≥mo ayuda el montaje (edici√≥n) a este ritmo?"></textarea>
            </div>

        </div>

        <div class="section-title">II. Estructura Narrativa</div>

        <div class="timeline-wrapper">
            <div class="timeline-flex">
                <div class="timeline-column">
                    <div class="phase-header"><span class="dot dot-1"></span> Planteamiento</div>
                    <textarea placeholder="Equilibrio inicial. ¬øQui√©n es el protagonista y qu√© quiere? Presentaci√≥n del tiempo y espacio."></textarea>
                </div>
                <div class="timeline-column">
                    <div class="phase-header"><span class="dot dot-2"></span> Nudo</div>
                    <textarea placeholder="El Conflicto. ¬øQu√© obst√°culo aparece (Antagonista)? Desarrollo de la acci√≥n."></textarea>
                </div>
                <div class="timeline-column">
                    <div class="phase-header"><span class="dot dot-3"></span> Desenlace</div>
                    <textarea placeholder="Resoluci√≥n. ¬øConsigue su objetivo? ¬øCu√°l es la situaci√≥n final (nuevo equilibrio)?"></textarea>
                </div>
            </div>
        </div>

    </div> 
    <div style="text-align: center; margin-top: 20px; color: #555; font-size: 0.8rem;">
        <p>Recuerda revisar tus respuestas antes de descargar la imagen.</p>
    </div>

    <div id="modalOverlay" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-box">
            <h3 id="modalTitle">T√≠tulo</h3>
            <div id="modalContent" class="modal-content">Contenido</div>
            <button class="btn-close" onclick="document.getElementById('modalOverlay').style.display='none'">Entendido</button>
        </div>
    </div>

    <script>
        // CONTENIDOS DE AYUDA (Actualizados con tus correcciones te√≥ricas)
        const helpData = {
            pov: {
                title: "1. Punto de Vista (Narrador)",
                content: `
                    <p>Recuerda la distinci√≥n clave:</p>
                    <ul>
                        <li><strong>INTERNO:</strong> Es un personaje (dentro de la historia). Narra en 1¬™ persona.</li>
                        <li><strong>EXTERNO:</strong> NO es un personaje (fuera de la historia). Narra en 3¬™ persona.</li>
                    </ul>
                    <p>En video, a veces el narrador es la propia c√°mara (objetivo).</p>
                `
            },
            pregunta: {
                title: "2. Pregunta Dram√°tica",
                content: "Es el gancho. Es esa duda que se plantea al principio y que necesitas resolver. Ejemplo: <em>¬øConseguir√° el chico llegar a tiempo a la cita?</em>. Si la pregunta es d√©bil, el espectador se aburre."
            },
            emocion: {
                title: "3. Componente Emocional",
                content: "Las narrativas digitales buscan conectar, no solo informar. Identifica si el video apela al coraz√≥n (amor, pena), al est√≥mago (miedo, asco) o a la risa."
            },
            voz: {
                title: "4. La Voz del Narrador",
                content: "¬øC√≥mo nos habla? ¬øEs una voz institucional y seria? ¬øEs un youtuber en√©rgico? ¬øEs ir√≥nico? La voz marca la personalidad del video."
            },
            musica: {
                title: "5. Banda Sonora",
                content: "Cierra los ojos un momento. ¬øLa m√∫sica dicta lo que debes sentir? A veces el silencio es la m√∫sica m√°s potente."
            },
            economia: {
                title: "6. Econom√≠a Narrativa",
                content: "En digital, el tiempo es oro. La econom√≠a narrativa es la capacidad de contar mucho con pocos elementos. ¬øHay escenas de relleno o todo es √∫til?"
            },
            ritmo: {
                title: "7. Ritmo de la Historia",
                content: "Es la velocidad de los acontecimientos. Puede ser fren√©tico (videoclip) o pausado. El ritmo se crea con la duraci√≥n de los planos y el movimiento de c√°mara."
            }
        };

        function openModal(key) {
            const data = helpData[key];
            document.getElementById('modalTitle').innerHTML = data.title;
            document.getElementById('modalContent').innerHTML = data.content;
            document.getElementById('modalOverlay').style.display = 'flex';
        }

        function closeModal(e) {
            if(e.target.id === 'modalOverlay') {
                e.target.style.display = 'none';
            }
        }

        // FUNCI√ìN PARA DESCARGAR IMAGEN
        function downloadImage() {
            const captureElement = document.getElementById('capture-area');
            const btn = document.querySelector('.btn-download');
            
            // Efecto visual de "Cargando"
            const originalText = btn.innerHTML;
            btn.innerHTML = "‚è≥ Generando...";

            html2canvas(captureElement, {
                backgroundColor: "#141414", // Asegura que el fondo sea oscuro
                scale: 2 // Mejora la resoluci√≥n (Retina)
            }).then(canvas => {
                // Crear link de descarga
                const link = document.createElement('a');
                link.download = 'analisis_narrativo.png';
                link.href = canvas.toDataURL("image/png");
                link.click();
                
                // Restaurar bot√≥n
                btn.innerHTML = originalText;
            }).catch(err => {
                console.error("Error al generar imagen:", err);
                alert("Hubo un error al generar la imagen.");
                btn.innerHTML = originalText;
            });
        }
    </script>

</body>
</html>