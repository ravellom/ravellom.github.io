<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        (function () {
            const params = new URLSearchParams(window.location.search);
            const isEmbed = params.get('embed') === '1';
            const isStandalone = params.get('standalone') === '1';
            if (!isEmbed && !isStandalone) {
                window.location.replace('../survey-suite/?view=wordcloud');
                return;
            }
            if (isEmbed) {
                document.documentElement.classList.add('embed-mode');
            }
        })();
    </script>
    <title>Nube de Palabras - Generador de Word Clouds</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../assets/css/recuedu-topbar.css">
    <link rel="stylesheet" href="style.css">
</head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5NTJRD37');</script>
<!-- End Google Tag Manager -->
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5NTJRD37"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <!-- RecuEdu Topbar -->
    <div class="recuedu-topbar">
        <div class="topbar-container">
            <a href="../../index.html" class="topbar-brand">
                <i class="fa-solid fa-flask-vial"></i>
                <span>RecuEdu Labs</span>
            </a>
            <div class="topbar-links">
                <a href="../../index.html">
                    <i class="fa-solid fa-home"></i>
                    <span>Inicio</span>
                </a>
                <a href="https://github.com/ravellom" target="_blank">
                    <i class="fa-brands fa-github"></i>
                </a>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <!-- Panel lateral de opciones -->
            <div class="col-md-4 col-lg-3 sidebar">
                <div class="sidebar-content">
                    <div class="language-selector mb-3">
                        <select id="languageSelector" class="form-select form-select-sm">
                            <option value="es">游쀯릖 Espa침ol</option>
                            <option value="en">游섫릖 English</option>
                        </select>
                    </div>
                    
                    <div class="section">
                        <h3><i class="fas fa-database"></i> <span data-i18n="sharedDataset">Shared dataset</span></h3>
                        <div class="mt-2 mb-2">
                            <small class="text-muted"><span data-i18n="activeDataset">Active dataset</span>: <span id="activeDatasetName">-</span></small>
                        </div>
                        <label class="form-label"><span data-i18n="textColumn">Text column</span>:</label>
                        <select id="datasetColumnSelect" class="form-select form-select-sm mb-2">
                            <option value="">Select column...</option>
                        </select>
                        <button type="button" id="btn-use-column" class="btn btn-sm btn-outline-light w-100">
                            <i class="fas fa-file-import"></i> <span data-i18n="useColumn">Use column text</span>
                        </button>
                    </div>

                    <h1 class="app-title">
                        <i class="fas fa-cloud"></i> <span data-i18n="title">Nube de Palabras</span>
                    </h1>
                    
                    <!-- 츼rea de texto -->
                    <div class="section">
                        <h3><i class="fas fa-keyboard"></i> <span data-i18n="textSection">Texto</span></h3>
                        <textarea id="textInput" class="form-control" rows="8" data-i18n-placeholder="textPlaceholder"></textarea>
                        <div class="mt-2">
                            <small class="text-muted"><span data-i18n="wordsDetected">Palabras detectadas</span>: <span id="wordCount">0</span></small>
                        </div>
                    </div>

                    <!-- Cargar archivo -->
                    <div class="section">
                        <h3><i class="fas fa-file-upload"></i> <span data-i18n="loadFile">Cargar archivo</span></h3>
                        <input type="file" id="fileInput" class="form-control" accept=".txt,.csv">
                    </div>

                    <!-- Palabras a excluir -->
                    <div class="section">
                        <h3><i class="fas fa-ban"></i> <span data-i18n="excludeWords">Palabras a excluir</span></h3>
                        <textarea id="stopWords" class="form-control" rows="3" data-i18n-placeholder="excludePlaceholder"></textarea>
                        
                        <div class="mt-2 mb-2">
                            <label class="form-label" style="font-size: 0.9rem;"><span data-i18n="addGroups">Agregar grupos de palabras</span>:</label>
                            <div class="d-flex flex-wrap gap-2">
                                <button type="button" class="btn btn-sm btn-outline-light" onclick="addWordGroup('articles')">
                                    <i class="fas fa-plus-circle"></i> <span data-i18n="btnArticles">Art칤culos</span>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-light" onclick="addWordGroup('prepositions')">
                                    <i class="fas fa-plus-circle"></i> <span data-i18n="btnPrepositions">Preposiciones</span>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-light" onclick="addWordGroup('conjunctions')">
                                    <i class="fas fa-plus-circle"></i> <span data-i18n="btnConjunctions">Conjunciones</span>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-light" onclick="addWordGroup('pronouns')">
                                    <i class="fas fa-plus-circle"></i> <span data-i18n="btnPronouns">Pronombres</span>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-light" onclick="addWordGroup('common')">
                                    <i class="fas fa-plus-circle"></i> <span data-i18n="btnCommon">Comunes</span>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-light" onclick="addWordGroup('all')">
                                    <i class="fas fa-check-double"></i> <span data-i18n="btnAll">Todas</span>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-danger" onclick="clearStopWords()">
                                    <i class="fas fa-trash"></i> <span data-i18n="btnClear">Limpiar</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-check mt-2">
                            <input class="form-check-input" type="checkbox" id="caseSensitive">
                            <label class="form-check-label" for="caseSensitive">
                                <span data-i18n="caseSensitive">Distinguir may칰sculas/min칰sculas</span>
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="removeNumbers">
                            <label class="form-check-label" for="removeNumbers">
                                <span data-i18n="removeNumbers">Eliminar n칰meros</span>
                            </label>
                        </div>
                    </div>

                    <!-- Configuraci칩n visual -->
                    <div class="section">
                        <h3><i class="fas fa-palette"></i> <span data-i18n="visualConfig">Configuraci칩n visual</span></h3>
                        
                        <label class="form-label"><span data-i18n="maxWords">Palabras m치ximas</span>:</label>
                        <input type="range" class="form-range" id="maxWords" min="10" max="200" value="50">
                        <div class="text-center"><small id="maxWordsValue">50</small></div>

                        <label class="form-label mt-3"><span data-i18n="fontSize">Tama침o de fuente</span> (<span data-i18n="minMax">m칤n-m치x</span>):</label>
                        <div class="row">
                            <div class="col-6">
                                <input type="number" class="form-control form-control-sm" id="minFont" value="10" min="5" max="50">
                                <small class="text-muted" data-i18n="minimum">M칤nimo</small>
                            </div>
                            <div class="col-6">
                                <input type="number" class="form-control form-control-sm" id="maxFont" value="80" min="20" max="200">
                                <small class="text-muted" data-i18n="maximum">M치ximo</small>
                            </div>
                        </div>

                        <label class="form-label mt-3"><span data-i18n="colorScheme">Esquema de color</span>:</label>
                        <select class="form-select" id="colorScheme">
                            <option value="default" data-i18n-option="colorDefault">Multicolor (Defecto)</option>
                            <option value="blue" data-i18n-option="colorBlue">Azules</option>
                            <option value="red" data-i18n-option="colorRed">Rojos</option>
                            <option value="green" data-i18n-option="colorGreen">Verdes</option>
                            <option value="purple" data-i18n-option="colorPurple">P칰rpuras</option>
                            <option value="orange" data-i18n-option="colorOrange">Naranjas</option>
                            <option value="warm" data-i18n-option="colorWarm">C치lidos</option>
                            <option value="cool" data-i18n-option="colorCool">Fr칤os</option>
                            <option value="grayscale" data-i18n-option="colorGrayscale">Escala de grises</option>
                            <option value="custom" data-i18n-option="colorCustom">Personalizado</option>
                        </select>

                        <div id="customColorsSection" class="mt-2" style="display: none;">
                            <label class="form-label"><span data-i18n="customColors">Colores personalizados</span> (<span data-i18n="commaSeparated">separados por comas</span>):</label>
                            <input type="text" class="form-control" id="customColors" placeholder="#3498db, #e74c3c, #2ecc71">
                        </div>

                        <label class="form-label mt-3"><span data-i18n="shape">Forma</span>:</label>
                        <select class="form-select" id="cloudShape">
                            <option value="circle" data-i18n-option="shapeCircle">Circular</option>
                            <option value="rectangle" data-i18n-option="shapeRectangle">Rectangular</option>
                            <option value="ellipse" data-i18n-option="shapeEllipse">Elipse</option>
                        </select>

                        <label class="form-label mt-3"><span data-i18n="fontFamily">Fuente tipogr치fica</span>:</label>
                        <select class="form-select" id="fontFamily">
                            <option value="Impact" data-i18n-option="fontImpact">Impact (Cl치sica)</option>
                            <option value="Arial">Arial</option>
                            <option value="Helvetica">Helvetica</option>
                            <option value="Times New Roman">Times New Roman</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Courier New">Courier New</option>
                            <option value="Verdana">Verdana</option>
                            <option value="Comic Sans MS">Comic Sans MS</option>
                            <option value="Trebuchet MS">Trebuchet MS</option>
                            <option value="Palatino">Palatino</option>
                            <option value="Garamond">Garamond</option>
                            <option value="Bookman">Bookman</option>
                            <option value="Tahoma">Tahoma</option>
                            <option value="Lucida Console">Lucida Console</option>
                        </select>

                        <label class="form-label mt-3"><span data-i18n="rotation">Rotaci칩n</span>:</label>
                        <select class="form-select" id="rotation">
                            <option value="none" data-i18n-option="rotationNone">Sin rotaci칩n</option>
                            <option value="slight" data-i18n-option="rotationSlight">Leve (-15춿 a 15춿)</option>
                            <option value="medium" data-i18n-option="rotationMedium">Moderada (-45춿 a 45춿)</option>
                            <option value="varied" data-i18n-option="rotationVaried">Variada (-90춿 a 90춿)</option>
                            <option value="perpendicular" data-i18n-option="rotationPerpendicular">Solo perpendicular (0춿 o 90춿)</option>
                        </select>
                    </div>

                    <!-- Botones de acci칩n -->
                    <div class="section">
                        <button id="generateBtn" class="btn btn-primary w-100 mb-2">
                            <i class="fas fa-magic"></i> <span data-i18n="btnGenerate">Generar Nube</span>
                        </button>
                        <button id="downloadBtn" class="btn btn-success w-100 mb-2">
                            <i class="fas fa-download"></i> <span data-i18n="btnDownloadPNG">Descargar PNG</span>
                        </button>
                        <button id="downloadSVG" class="btn btn-info w-100 mb-2">
                            <i class="fas fa-download"></i> <span data-i18n="btnDownloadSVG">Descargar SVG</span>
                        </button>
                        <button id="resetBtn" class="btn btn-secondary w-100">
                            <i class="fas fa-redo"></i> <span data-i18n="btnReset">Limpiar todo</span>
                        </button>
                    </div>

                    <!-- Estad칤sticas -->
                    <div class="section">
                        <h3><i class="fas fa-chart-bar"></i> <span data-i18n="statistics">Estad칤sticas</span></h3>
                        <div id="stats" class="stats-container"></div>
                    </div>
                </div>
            </div>

            <!-- 츼rea de visualizaci칩n -->
            <div class="col-md-8 col-lg-9 main-content">
                <div class="canvas-container">
                    <div id="cloudCanvas"></div>
                    <div id="emptyState" class="empty-state">
                        <i class="fas fa-cloud fa-5x mb-4"></i>
                        <h2 data-i18n="emptyTitle">춰Crea tu nube de palabras!</h2>
                        <p data-i18n="emptyDescription">Escribe o carga texto y haz clic en "Generar Nube"</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../data-processor/recuedu-data-lib.js?v=20260212019"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-cloud@1.2.7/build/d3.layout.cloud.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
