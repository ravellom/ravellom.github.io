<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unidad 4 - L√≠rica Renacentista</title>
    <style>
        :root {
            --primary: #58cc02;
            --primary-dark: #46a302;
            --secondary: #1cb0f6;
            --secondary-dark: #1899d6;
            --purple: #ce82ff;
            --orange: #ff9600;
            --error: #ff4b4b;
            --background: #f7f9fa; /* Fondo muy claro */
            --sidebar-bg: #ffffff;
            --text: #3c3c3c;
            --gray: #e5e5e5;
            --border-radius: 16px;
        }

        body {
            font-family: 'Nunito', 'Segoe UI', Helvetica, Arial, sans-serif;
            background-color: var(--background);
            color: var(--text);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* SIDEBAR */
        .sidebar {
            width: 260px;
            background: var(--sidebar-bg);
            border-right: 2px solid var(--gray);
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        .logo {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--primary-dark);
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-item {
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 700;
            color: #777;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .nav-item:hover {
            background-color: #f0f0f0;
        }

        .nav-item.active {
            background-color: #ddf4ff;
            color: var(--secondary-dark);
            border-color: var(--secondary);
        }

        /* MAIN CONTENT */
        .main-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        /* Header Mobile */
        .mobile-header {
            display: none;
            width: 100%;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .menu-toggle {
            font-size: 1.5rem;
            cursor: pointer;
            background: none;
            border: none;
        }

        /* GAME CARD */
        .game-card {
            width: 100%;
            max-width: 700px;
            background: #fff;
            border-radius: var(--border-radius);
            border: 2px solid var(--gray);
            box-shadow: 0 4px 0 var(--gray);
            padding: 30px;
            margin-top: 20px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .category-badge {
            align-self: flex-start;
            background: var(--purple);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 800;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .question-text {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .verse-box {
            font-family: 'Georgia', serif;
            font-style: italic;
            background: #fdf6e3; /* Tono papel antiguo suave */
            padding: 20px;
            border-left: 5px solid var(--orange);
            border-radius: 8px;
            margin-bottom: 25px;
            color: #4a4a4a;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* GRID RESPUESTAS */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .option-btn {
            background: #fff;
            border: 2px solid var(--gray);
            border-bottom: 4px solid var(--gray);
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            text-align: left;
            transition: all 0.1s;
            color: var(--text);
        }

        .option-btn:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }

        .option-btn.correct {
            background-color: #d7ffb8;
            border-color: var(--primary);
            border-bottom-color: var(--primary-dark);
            color: var(--primary-dark);
        }

        .option-btn.incorrect {
            background-color: #ffdfe0;
            border-color: var(--error);
            border-bottom-color: #d32f2f;
            color: #d32f2f;
        }

        /* FEEDBACK AREA */
        .feedback-container {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid var(--gray);
            display: none;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback-title {
            font-weight: 900;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .feedback-text {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .next-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-bottom: 4px solid var(--primary-dark);
            padding: 15px;
            width: 100%;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1.1rem;
            cursor: pointer;
            text-transform: uppercase;
        }

        .next-btn:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }

        /* ESTADOS VAC√çOS */
        .welcome-screen {
            text-align: center;
            max-width: 500px;
            margin-top: 50px;
        }
        
        .welcome-screen h2 { font-size: 2rem; color: var(--secondary); margin-bottom: 10px;}
        .welcome-screen p { font-size: 1.1rem; color: #777; }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .sidebar {
                position: absolute;
                z-index: 100;
                height: 100%;
                transform: translateX(-100%);
            }
            .sidebar.open {
                transform: translateX(0);
                box-shadow: 5px 0 15px rgba(0,0,0,0.1);
            }
            .mobile-header { display: flex; }
            .options-grid { grid-template-columns: 1fr; }
        }
        
        @media (min-width: 769px) {
            .options-grid { grid-template-columns: 1fr 1fr; }
        }

    </style>
</head>
<body>

    <nav class="sidebar" id="sidebar">
        <div class="logo">üìö LIT. RENACENTISTA</div>
        
        <div class="nav-item active" onclick="loadCategory('intro')">
            <span>üåç</span> Contexto y M√©trica
        </div>
        <div class="nav-item" onclick="loadCategory('garcilaso')">
            <span>üíî</span> Garcilaso de la Vega
        </div>
        <div class="nav-item" onclick="loadCategory('frayluis')">
            <span>üôè</span> Fray Luis de Le√≥n
        </div>
        <div class="nav-item" onclick="loadCategory('sanjuan')">
            <span>üî•</span> San Juan de la Cruz
        </div>
        <div class="nav-item" onclick="loadCategory('otros')">
            <span>‚öîÔ∏è</span> √âpica y Herrera
        </div>
        <div class="nav-item" style="margin-top: auto; border: 2px solid var(--gray);" onclick="loadCategory('mix')">
            <span>üé≤</span> REPASO GENERAL (MIX)
        </div>
    </nav>

    <main class="main-content">
        
        <div class="mobile-header">
            <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
            <span style="font-weight: 800; color: var(--secondary);">Unidad 4</span>
        </div>

        <div id="game-area" class="game-card">
            <div class="welcome-screen">
                <h2>¬°Hola! üëã</h2>
                <p>Selecciona un tema en el men√∫ de la izquierda para empezar a entrenar.</p>
                <button class="next-btn" onclick="loadCategory('mix')" style="margin-top: 20px;">Empezar Repaso Aleatorio</button>
            </div>
        </div>

    </main>

    <script>
        // --- BASE DE DATOS DE EJERCICIOS ---
        
        const database = {
            intro: [
                {
                    q: "¬øQu√© estrofa, introducida por Garcilaso, se compone de versos de 7 y 11 s√≠labas?",
                    type: "concept",
                    options: ["La Lira", "El Romance", "La Cuaderna V√≠a", "El Soneto"],
                    correct: 0,
                    explanation: "La Lira (7a, 11B, 7a, 7b, 11B) es la estrofa clave del Renacimiento espa√±ol."
                },
                {
                    q: "¬øQu√© tema NO es t√≠pico del Renacimiento?",
                    type: "concept",
                    options: ["La muerte macabra y oscura", "El Carpe Diem", "La naturaleza idealizada", "El amor neoplat√≥nico"],
                    correct: 0,
                    explanation: "La visi√≥n macabra de la muerte es medieval. El Renacimiento busca la armon√≠a y la belleza."
                },
                {
                    q: "Verdadero o Falso: La literatura de la 2¬™ mitad del siglo XVI se vuelve m√°s religiosa por la Contrarreforma.",
                    type: "truefalse",
                    options: ["Verdadero", "Falso"],
                    correct: 0,
                    explanation: "Correcto. Tras el Concilio de Trento, la literatura espa√±ola se centra en lo moral y religioso (Fray Luis y San Juan)."
                }
            ],
            garcilaso: [
                {
                    text: "En tanto que de rosa y azucena<br>se muestra la color en vuestro gesto...",
                    q: "¬øQu√© t√≥pico cl√°sico (latino) desarrolla este Soneto XXIII?",
                    type: "poetry",
                    options: ["Carpe Diem", "Beatus Ille", "Locus Amoenus", "Ubi Sunt"],
                    correct: 0,
                    explanation: "Carpe Diem ('aprovecha el d√≠a'). Invita a disfrutar la belleza juvenil antes de que llegue la vejez."
                },
                {
                    q: "En las √âglogas de Garcilaso, ¬øqui√©nes son los protagonistas?",
                    type: "concept",
                    options: ["Pastores idealizados", "Caballeros medievales", "Santos y m√°rtires", "Dioses del Olimpo"],
                    correct: 0,
                    explanation: "Las √âglogas pertenecen al g√©nero pastoril. Los pastores (como Salicio y Nemoroso) discuten sobre sus amores en una naturaleza perfecta."
                },
                {
                    text: "Y en torn√°ndose en flor...",
                    q: "Completa el verso: Garcilaso escribi√≥ un soneto sobre el mito de Apolo y...",
                    type: "poetry",
                    options: ["Dafne", "Venus", "Helena", "Diana"],
                    correct: 0,
                    explanation: "El soneto XIII narra c√≥mo Dafne se convierte en laurel mientras Apolo la persigue."
                }
            ],
            frayluis: [
                {
                    text: "¬°Qu√© descansada vida<br>la del que huye del mundanal r√ºido...",
                    q: "¬øA qu√© obra pertenece este inicio?",
                    type: "poetry",
                    options: ["Oda a la vida retirada", "C√°ntico Espiritual", "Noche Oscura", "La Araucana"],
                    correct: 0,
                    explanation: "Es la obra m√°s famosa de Fray Luis de Le√≥n, donde expone su deseo de paz y aislamiento."
                },
                {
                    q: "¬øQu√© t√≥pico utiliza Fray Luis para defender la 'dorada median√≠a' (vivir con lo justo)?",
                    type: "concept",
                    options: ["Aurea Mediocritas", "Tempus Fugit", "Memento Mori", "Descriptio Puellae"],
                    correct: 0,
                    explanation: "Aurea Mediocritas es el ideal de moderaci√≥n: ni mucha riqueza ni pobreza extrema, para tener paz espiritual."
                },
                {
                    q: "¬øQu√© tres fuentes combina la obra de Fray Luis de Le√≥n?",
                    type: "concept",
                    options: ["Biblia, Cl√°sicos latinos y Poes√≠a italiana", "√âpica medieval y romances", "Filosof√≠a francesa y teatro", "Cantares de gesta"],
                    correct: 0,
                    explanation: "Fray Luis es la s√≠ntesis perfecta: humanismo cristiano (Biblia), formas italianas (Lira) y cl√°sicos (Horacio/Virgilio)."
                }
            ],
            sanjuan: [
                {
                    q: "Seg√∫n San Juan, ¬øcu√°l es la v√≠a donde el alma se purifica de los pecados?",
                    type: "concept",
                    options: ["V√≠a Purgativa", "V√≠a Iluminativa", "V√≠a Unitiva", "V√≠a L√°ctea"],
                    correct: 0,
                    explanation: "Es la primera fase: la V√≠a Purgativa, donde el alma se limpia mediante la penitencia."
                },
                {
                    text: "¬°Oh noche que guiaste!<br>¬°Oh noche amable m√°s que el alborada!",
                    q: "¬øQu√© simboliza la 'Noche' en este poema?",
                    type: "poetry",
                    options: ["El camino de la fe (guiar sin ver)", "La muerte f√≠sica", "La tristeza y depresi√≥n", "El pecado"],
                    correct: 0,
                    explanation: "Para San Juan, la noche no es negativa; es el tr√°nsito de la fe, donde el alma se deja guiar por Dios a oscuras."
                },
                {
                    q: "¬øQu√© es un 'ox√≠moron' (recurso muy usado por los m√≠sticos)?",
                    type: "concept",
                    options: ["Uni√≥n de dos conceptos opuestos", "Repetici√≥n de sonidos", "Comparaci√≥n con 'como'", "Exageraci√≥n desmedida"],
                    correct: 0,
                    explanation: "Ejemplos de San Juan: 'M√∫sica callada', 'Soledad sonora'. Expresan realidades inefables uniendo contrarios."
                },
                {
                    text: "¬øAd√≥nde te escondiste,<br>Amado, y me dejaste con gemido?",
                    q: "¬øQui√©n habla en estos versos del C√°ntico Espiritual?",
                    type: "poetry",
                    options: ["La Esposa (el Alma)", "El Amado (Dios)", "Las Criaturas", "Las Fieras"],
                    correct: 0,
                    explanation: "Es la Esposa (el Alma) que despierta y nota la ausencia de Dios, saliendo a buscarlo."
                }
            ],
            otros: [
                {
                    q: "¬øQui√©n escribi√≥ 'La Araucana', poema √©pico sobre la conquista de Chile?",
                    type: "concept",
                    options: ["Alonso de Ercilla", "Fernando de Herrera", "Garcilaso de la Vega", "Lope de Vega"],
                    correct: 0,
                    explanation: "Ercilla fue soldado y poeta, y narr√≥ las batallas contra los mapuches en octavas reales."
                },
                {
                    q: "Fernando de Herrera, de la Escuela Sevillana, es conocido por...",
                    type: "concept",
                    options: ["Sus Anotaciones a la obra de Garcilaso", "Escribir novelas de caballer√≠as", "Ser el maestro de Cervantes", "Inventar el soneto"],
                    correct: 0,
                    explanation: "Herrera estudi√≥ a fondo a Garcilaso y escribi√≥ comentarios (Anotaciones) que elevaron al toledano a la categor√≠a de cl√°sico."
                }
            ]
        };

        // --- L√ìGICA DEL JUEGO ---

        let currentCategory = '';
        let currentQuestion = null;
        let isAnswering = true;

        const gameArea = document.getElementById('game-area');
        const sidebar = document.getElementById('sidebar');
        const navItems = document.querySelectorAll('.nav-item');

        function toggleSidebar() {
            sidebar.classList.toggle('open');
        }

        function loadCategory(catId) {
            currentCategory = catId;
            
            // Actualizar UI Sidebar
            navItems.forEach(item => item.classList.remove('active'));
            const selectedItem = [...navItems].find(item => item.onclick.toString().includes(catId));
            if(selectedItem) selectedItem.classList.add('active');

            // Cerrar men√∫ m√≥vil si est√° abierto
            sidebar.classList.remove('open');

            nextQuestion();
        }

        function getRandomQuestion() {
            let pool = [];
            if (currentCategory === 'mix') {
                // Unir todas las categor√≠as
                Object.values(database).forEach(arr => pool = pool.concat(arr));
            } else {
                pool = database[currentCategory];
            }
            const randomIndex = Math.floor(Math.random() * pool.length);
            return pool[randomIndex];
        }

        function renderQuestion() {
            currentQuestion = getRandomQuestion();
            isAnswering = true;
            
            // T√≠tulos bonitos para la tarjeta
            const titles = {
                intro: "Contexto y M√©trica",
                garcilaso: "Garcilaso de la Vega",
                frayluis: "Fray Luis de Le√≥n",
                sanjuan: "San Juan de la Cruz",
                otros: "√âpica y Escuela Sevillana",
                mix: "Repaso General"
            };

            const bgColors = {
                intro: "#ce82ff",
                garcilaso: "#ff9600",
                frayluis: "#1cb0f6",
                sanjuan: "#ff4b4b",
                otros: "#58cc02",
                mix: "#3c3c3c"
            };
            
            // Determinar etiqueta de categor√≠a si estamos en MIX
            let badgeText = titles[currentCategory];
            let badgeColor = bgColors[currentCategory];

            // Si es MIX, intentamos averiguar de d√≥nde viene la pregunta para colorear el badge
            if(currentCategory === 'mix') {
                for (const [key, value] of Object.entries(database)) {
                    if (value.includes(currentQuestion)) {
                        badgeText = titles[key];
                        badgeColor = bgColors[key];
                        break;
                    }
                }
            }

            let html = `
                <div>
                    <div class="category-badge" style="background:${badgeColor}">${badgeText}</div>
                    ${currentQuestion.text ? `<div class="verse-box">${currentQuestion.text}</div>` : ''}
                    <div class="question-text">${currentQuestion.q}</div>
                    
                    <div class="options-grid">
                        ${currentQuestion.options.map((opt, i) => 
                            `<button class="option-btn" onclick="checkAnswer(${i}, this)">${opt}</button>`
                        ).join('')}
                    </div>
                </div>

                <div class="feedback-container" id="feedback">
                    <div class="feedback-title" id="fb-title"></div>
                    <div class="feedback-text" id="fb-text"></div>
                    <button class="next-btn" onclick="nextQuestion()">Siguiente Pregunta ‚ûú</button>
                </div>
            `;

            gameArea.innerHTML = html;
        }

        function checkAnswer(selectedIndex, btn) {
            if (!isAnswering) return;
            isAnswering = false;

            const feedbackContainer = document.getElementById('feedback');
            const fbTitle = document.getElementById('fb-title');
            const fbText = document.getElementById('fb-text');
            const allBtns = document.querySelectorAll('.option-btn');

            if (selectedIndex === currentQuestion.correct) {
                btn.classList.add('correct');
                fbTitle.textContent = "¬°Excelente! üåü";
                fbTitle.style.color = "var(--primary-dark)";
            } else {
                btn.classList.add('incorrect');
                allBtns[currentQuestion.correct].classList.add('correct');
                fbTitle.textContent = "¬°Casi! üòÖ";
                fbTitle.style.color = "#d32f2f";
            }

            fbText.textContent = currentQuestion.explanation;
            feedbackContainer.style.display = 'block';
        }

        function nextQuestion() {
            renderQuestion();
        }

    </script>
</body>
</html>